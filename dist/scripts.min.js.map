{"version":3,"sources":["scripts.js"],"names":["loadInclude","$block","blockName","resp","text","regeneratorRuntime","async","_context","prev","next","awrap","fetch","concat","sent","innerHTML","stop","hydrate","createTag","name","attrs","el","document","createElement","_typeof","_i","_Object$entries","Object","entries","length","_Object$entries$_i","_slicedToArray","key","value","setAttribute","wrapSections","element","querySelectorAll","forEach","$div","childNodes","firstElementChild","id","$wrapper","class","parentNode","appendChild","remove","decorateFullWidthImage","$img","$section","closest","children","tagName","startsWith","classList","add","loadCSS","href","querySelector","link","onload","onerror","head","_context2","getAttribute","Promise","resolve","then","_interopRequireWildcard","require","mod","err","decorateBlocks","values","replace","b","options","substring","split","filter","opt","_$block$classList","apply","_toConsumableArray","decoratePage","_context3","loadHeader","loadLater","addEventListener","loadBlocks","body"],"mappings":"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","file":"scripts.min.js","sourcesContent":["export async function loadInclude($block, blockName) {\n  const resp = await fetch(`/blocks/${blockName}/${blockName}.html`);\n  const text = await resp.text();\n  $block.innerHTML = text;\n}\n\nexport function hydrate() {\n  \n}\n\nexport function createTag(name, attrs) {\n  const el = document.createElement(name);\n  if (typeof attrs === 'object') {\n    for (const [key, value] of Object.entries(attrs)) {\n      el.setAttribute(key, value);\n    }\n  }\n  return el;\n}\n\nfunction wrapSections(element) {\n  document.querySelectorAll(element).forEach(($div) => {\n    if ($div.childNodes.length === 0 || !$div.firstElementChild) {\n      // remove empty sections\n      $div.remove();\n    } else if (!$div.id) {\n      const $wrapper = createTag('div', { class: 'section-wrapper' });\n      $div.parentNode.appendChild($wrapper);\n      $wrapper.appendChild($div);\n    }\n  });\n}\n\nfunction decorateFullWidthImage() {\n  document.querySelectorAll('img').forEach(($img) => {\n    const $section = $img.closest('div');\n    if ($section.children.length === 1 || ($section.children.length === 2 && $section.children[1].tagName.startsWith('H'))) {\n      $section.parentNode.classList.add('full-image');\n      $section.parentNode.classList.remove('section-wrapper');\n    }\n  })\n}\n\n/**\n * Loads a CSS file.\n * @param {string} href The path to the CSS file\n */\n export function loadCSS(href) {\n  if (!document.querySelector(`head > link[href=\"${href}\"]`)) {\n    const link = document.createElement('link');\n    link.setAttribute('rel', 'stylesheet');\n    link.setAttribute('href', href);\n    link.onload = () => {\n    };\n    link.onerror = () => {\n    };\n    document.head.appendChild(link);\n  }\n}\n\nfunction loadBlocks() {\n  document.querySelectorAll('main div.section-wrapper > div > .block').forEach(async ($block) => {\n    const blockName = $block.getAttribute('data-block-name');\n    import(`/blocks/${blockName}/${blockName}.js`)\n      .then((mod) => {\n        if (mod.default) {\n          mod.default($block, blockName, document);\n        }\n      })\n      .catch((err) => console.log(`failed to load module for ${blockName}`, err));\n\n    loadCSS(`/blocks/${blockName}/${blockName}.css`);\n  });\n}\n\nfunction decorateBlocks() {\n  document.querySelectorAll('main div.section-wrapper > div > div').forEach(($block) => {\n    const classes = Array.from($block.classList.values());\n    let blockName = classes[0];\n    const $section = $block.closest('.section-wrapper');\n    if ($section) {\n      $section.classList.add(`${blockName}-container`.replace(/--/g, '-'));\n    }\n    const blocksWithOptions = [];\n    blocksWithOptions.forEach((b) => {\n      if (blockName.startsWith(`${b}-`)) {\n        const options = blockName.substring(b.length + 1).split('-').filter((opt) => !!opt);\n        blockName = b;\n        $block.classList.add(b);\n        $block.classList.add(...options);\n      }\n    });\n    $block.classList.add('block');\n    $block.setAttribute('data-block-name', blockName);\n  });\n}\n\nfunction loadHeader() {\n\n}\n\nasync function decoratePage() {\n  wrapSections('main > div');\n  loadHeader();\n  decorateFullWidthImage();\n  decorateBlocks();\n  const $img = document.querySelector('main img');\n  if ($img) {\n    if ($img.complete) {\n      loadLater();\n    } else {\n      $img.addEventListener('load', () => {\n        loadLater();\n      })\n      $img.addEventListener('error', () => {\n        loadLater();\n      })\n    }\n  } else {\n    loadLater();\n  }\n  document.querySelector('main').classList.add('appear');\n}\n\nfunction loadLater() {\n  document.body.classList.add('appear');\n  loadBlocks();\n  loadCSS('/lazy-style.css');\n}\n\ndecoratePage();"]}